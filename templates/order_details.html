{% extends "main.html" %}
{% block title %} Заказы {% endblock %}
{% block content %}

    <h1>Состав заказа</h1><h1><a class="btn btn-primary" href="{% url 'orders_list' %}">Заказы</a></h1>

<div class="container">
<div class="row">
    <form  class="d-flex flex-column col-2" role="search" method="post">
        {% csrf_token %}

        {% if last_name %}

        <input class="form-control me-2" name="last_name" type="search" value="{{last_name}}" placeholder="Фамилия" aria-label="Search">
        {% else %}
        <input class="form-control me-2" name="last_name" type="search" placeholder="Фамилия" aria-label="Search">
        {% endif %}

        {% if category %}
        <input class="form-control me-2" name="category" type="search" value="{{category}}" placeholder="Категория товара" aria-label="Search">
        {% else %}
        <input class="form-control me-2" name="category" type="search" placeholder="Категория товара" aria-label="Search">
        {% endif %}

        {% if quantity %}
        <input class="form-control me-2" name="quantity" type="search" value="{{quantity}}" placeholder="Количество" aria-label="Search">
        {% else %}
        <input class="form-control me-2" name="quantity" type="search" placeholder="Количество" aria-label="Search">
        {% endif %}

        <div class="form-group">
            <label for="inputDate">Дата заказа:</label>
            {% if date_from %}
            <input type="date" value="{{date_from}}" name='date_from' class="form-control">
            {% else %}
            <input type="date" value="" name='date_from' class="form-control">
            {% endif %}
        </div>

        <div style="height: 10px"></div>
        <button class="btn btn-outline-success" name="search" value="True" type="submit">Поиск</button>
        <div style="height: 10px"></div>
        <button class="btn btn-outline-secondary" name="search" value="False" type="submit">Сбросить</button>
    </form>
    <div class="col-10">
    <table class="table table-striped table-hover ">
        <thead>
            <tr>
                <th scope="col">id заказа</th>
                <th scope="col">Фамилия покупателя</th>
                <th scope="col">Дата заказа</th>
                <th scope="col">Название товара</th>
                <th scope="col">Категория товара</th>
                <th scope="col">Количество</th>
            </tr>
        </thead>
        <tbody>
            {% for item in ordermat %}
            <tr>
                <td>{{item.order.order_id}}</td>
                <td scope="row">{{item.order.customer.last_name}}</td>
                <td>{{item.order.date}}</td>
                <td>{{item.material.name}}</td>
                <td>{{item.material.category.name}}</td>
                <td>{{item.quantity}}</td>

            </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
</div>
</div>

{% endblock %}